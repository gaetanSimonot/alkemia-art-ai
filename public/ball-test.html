<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Drag des Boules</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            font-family: Arial, sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #4a90ff;
        }

        .container {
            position: relative;
            width: 100%;
            height: calc(100vh - 100px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            overflow: hidden;
        }

        .ball {
            position: absolute;
            border-radius: 50%;
            cursor: move;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            transition: transform 0.1s ease;
            user-select: none;
            z-index: 10;
        }

        .ball:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 40px rgba(0,0,0,0.7);
        }

        .ball.dragging {
            transform: scale(1.1);
            z-index: 1000;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
        }

        .ball-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            font-weight: bold;
            white-space: nowrap;
            color: white;
            text-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        .ball-counter {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #06d6a0;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
        }

        .instructions {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.5);
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        .reset-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #4a90ff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
        }

        .reset-btn:hover {
            background: #3670d9;
        }

        /* Diff√©rentes tailles de boules */
        .ball.small { width: 60px; height: 60px; font-size: 18px; }
        .ball.medium { width: 80px; height: 80px; font-size: 24px; }
        .ball.large { width: 100px; height: 100px; font-size: 30px; }

        .coords {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 12px;
            background: rgba(0,0,0,0.5);
            padding: 5px 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>üß† Test Drag des Boules - HTML/CSS Pur</h1>

    <div class="instructions">
        <strong>Instructions:</strong><br>
        ‚Ä¢ Cliquez et glissez chaque boule individuellement<br>
        ‚Ä¢ Chaque boule doit bouger SEULE<br>
        ‚Ä¢ Aucune interf√©rence entre les boules<br>
        ‚Ä¢ Positions sauvegard√©es automatiquement
    </div>

    <button class="reset-btn" onclick="resetPositions()">Reset Positions</button>

    <div class="container" id="container">
        <!-- Les boules seront ajout√©es ici par JavaScript -->
    </div>

    <div class="coords" id="coords">Position: (0, 0)</div>

    <script>
        // Configuration des boules
        const balls = [
            { id: 'work', emoji: 'üíº', name: 'Travail', color: '#4a90ff', size: 'large', notes: 5 },
            { id: 'personal', emoji: 'üè†', name: 'Personnel', color: '#06d6a0', size: 'medium', notes: 3 },
            { id: 'ideas', emoji: 'üí°', name: 'Id√©es', color: '#f59e0b', size: 'large', notes: 4 },
            { id: 'projects', emoji: 'üöÄ', name: 'Projets', color: '#ec4899', size: 'medium', notes: 2 },
            { id: 'family', emoji: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', name: 'Famille', color: '#8b5cf6', size: 'small', notes: 1 },
            { id: 'health', emoji: 'üèÉ‚Äç‚ôÄÔ∏è', name: 'Sant√©', color: '#10b981', size: 'medium', notes: 3 }
        ];

        let draggedBall = null;
        let mouseOffset = { x: 0, y: 0 };
        let ballPositions = {};

        // Charger les positions sauvegard√©es
        function loadPositions() {
            const saved = localStorage.getItem('ball-test-positions');
            if (saved) {
                ballPositions = JSON.parse(saved);
            }
        }

        // Sauvegarder les positions
        function savePositions() {
            localStorage.setItem('ball-test-positions', JSON.stringify(ballPositions));
        }

        // Calculer position par d√©faut
        function getDefaultPosition(index) {
            const container = document.getElementById('container');
            const centerX = container.offsetWidth / 2;
            const centerY = container.offsetHeight / 2;
            const radius = Math.min(container.offsetWidth, container.offsetHeight) * 0.3;

            const angle = (index * 2 * Math.PI) / balls.length;
            return {
                x: centerX + Math.cos(angle) * radius - 50, // -50 pour centrer la boule
                y: centerY + Math.sin(angle) * radius - 50
            };
        }

        // Cr√©er une boule
        function createBall(ball, index) {
            const ballElement = document.createElement('div');
            ballElement.className = `ball ${ball.size}`;
            ballElement.id = ball.id;
            ballElement.style.backgroundColor = ball.color;
            ballElement.innerHTML = `
                ${ball.emoji}
                <div class="ball-label">${ball.name}</div>
                <div class="ball-counter">${ball.notes}</div>
            `;

            // Position initiale
            const position = ballPositions[ball.id] || getDefaultPosition(index);
            ballElement.style.left = position.x + 'px';
            ballElement.style.top = position.y + 'px';
            ballPositions[ball.id] = position;

            // Event listeners pour le drag
            ballElement.addEventListener('mousedown', handleMouseDown);
            ballElement.addEventListener('dragstart', e => e.preventDefault()); // Emp√™cher le drag par d√©faut

            return ballElement;
        }

        // Gestion du drag
        function handleMouseDown(e) {
            e.preventDefault();
            e.stopPropagation();

            draggedBall = e.currentTarget;
            draggedBall.classList.add('dragging');

            const rect = draggedBall.getBoundingClientRect();
            const containerRect = document.getElementById('container').getBoundingClientRect();

            mouseOffset.x = e.clientX - rect.left;
            mouseOffset.y = e.clientY - rect.top;

            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);

            console.log(`Started dragging: ${draggedBall.id}`);
        }

        function handleMouseMove(e) {
            if (!draggedBall) return;

            const container = document.getElementById('container');
            const containerRect = container.getBoundingClientRect();

            let newX = e.clientX - containerRect.left - mouseOffset.x;
            let newY = e.clientY - containerRect.top - mouseOffset.y;

            // Contraintes pour rester dans le container
            const ballSize = draggedBall.offsetWidth;
            newX = Math.max(0, Math.min(newX, container.offsetWidth - ballSize));
            newY = Math.max(0, Math.min(newY, container.offsetHeight - ballSize));

            draggedBall.style.left = newX + 'px';
            draggedBall.style.top = newY + 'px';

            // Afficher les coordonn√©es
            document.getElementById('coords').textContent = `Position ${draggedBall.id}: (${Math.round(newX)}, ${Math.round(newY)})`;
        }

        function handleMouseUp(e) {
            if (!draggedBall) return;

            console.log(`Stopped dragging: ${draggedBall.id} at (${draggedBall.style.left}, ${draggedBall.style.top})`);

            // Sauvegarder la nouvelle position
            ballPositions[draggedBall.id] = {
                x: parseInt(draggedBall.style.left),
                y: parseInt(draggedBall.style.top)
            };
            savePositions();

            draggedBall.classList.remove('dragging');
            draggedBall = null;

            document.removeEventListener('mousemove', handleMouseMove);
            document.removeEventListener('mouseup', handleMouseUp);
        }

        // Reset des positions
        function resetPositions() {
            ballPositions = {};
            localStorage.removeItem('ball-test-positions');

            balls.forEach((ball, index) => {
                const ballElement = document.getElementById(ball.id);
                const position = getDefaultPosition(index);
                ballElement.style.left = position.x + 'px';
                ballElement.style.top = position.y + 'px';
                ballPositions[ball.id] = position;
            });

            savePositions();
            console.log('Positions reset');
        }

        // Initialisation
        function init() {
            loadPositions();
            const container = document.getElementById('container');

            balls.forEach((ball, index) => {
                const ballElement = createBall(ball, index);
                container.appendChild(ballElement);
            });

            console.log('Ball test initialized with', balls.length, 'balls');
        }

        // D√©marrer quand la page est charg√©e
        document.addEventListener('DOMContentLoaded', init);

        // Redimensionnement
        window.addEventListener('resize', () => {
            // Optionnel: repositionner les boules si n√©cessaire
            console.log('Window resized');
        });
    </script>
</body>
</html>